<body>

    
  <div class="container-fluid">

        <main class="col-10" style='font-size:120%;'>

            <div class="container my-4" >
              
                  <div class="container">
                      <div class="row">

              
                          <!-- Main Content -->
                          <div class="col-md-16">
                              <div class="card">
                                  <div class="card-header d-flex justify-content-between align-items-center">
                                      <h4 class="mb-0">Détails de la Formation</h4>
                                      <div>
                                          <button class="btn btn-light me-2"><i class="fas fa-edit"></i> Modifier</button>
                                          <button class="btn btn-danger-custom"><i class="fas fa-trash"></i> Supprimer</button>
                                      </div>
                                  </div>
                                  <div class="card-body">
                                      <ul class="nav nav-tabs" id="formationTabs" role="tablist">
                                          <li class="nav-item" role="presentation">
                                              <button class="nav-link active" id="details-tab" data-bs-toggle="tab" data-bs-target="#details" type="button" role="tab" aria-controls="details" aria-selected="true">
                                                  <i class="fas fa-info-circle me-1"></i> Détails
                                              </button>
                                          </li>

                                          <li class="nav-item" role="presentation">
                                            <button class="nav-link" id="formateurs-tab" data-bs-toggle="tab" data-bs-target="#formateurs" type="button" role="tab" aria-controls="formateurs" aria-selected="false">
                                                <i class="fas fa-users me-1"></i> Formateurs <span class="badge bg-primary rounded-pill">24</span>
                                            </button>
                                        </li>
                                          <li class="nav-item" role="presentation">
                                              <button class="nav-link" id="inscrits-tab" data-bs-toggle="tab" data-bs-target="#inscrits" type="button" role="tab" aria-controls="inscrits" aria-selected="false">
                                                  <i class="fas fa-users me-1"></i> Inscrits <span class="badge bg-primary rounded-pill">24</span>
                                              </button>
                                          </li>



                                          <li class="nav-item" role="presentation">
                                              <button class="nav-link" id="seances-tab" data-bs-toggle="tab" data-bs-target="#seances" type="button" role="tab" aria-controls="seances" aria-selected="false">
                                                  <i class="fas fa-calendar-alt me-1"></i> Séances
                                              </button>
                                          </li>
                                          <li class="nav-item" role="presentation">
                                              <button class="nav-link" id="annonces-tab" data-bs-toggle="tab" data-bs-target="#annonces" type="button" role="tab" aria-controls="annonces" aria-selected="false">
                                                  <i class="fas fa-bullhorn me-1"></i> Annonces
                                              </button>
                                          </li>

                                          <li class="nav-item" role="presentation">
                                            <button class="nav-link" id="annonces-tab" data-bs-toggle="tab" data-bs-target="#annonces" type="button" role="tab" aria-controls="annonces" aria-selected="false">
                                                <i class="fas fa-bullhorn me-1"></i> TD & exercices
                                            </button>
                                        </li>
                                      </ul>
                                      
                                      <div class="tab-content p-3" id="formationTabsContent">
                                          <!-- Détails Tab -->
                                          <div class="tab-pane fade show active" id="details" role="tabpanel" aria-labelledby="details-tab" *ngFor="let formation of filteredIncritsFormations">
                                            <div class="row">
                                                <div class="col-md-8">
                                                    <h4 class="mb-4">{{ formation.titre }}</h4>
                                                    
                                                    <div class="row mb-4">
                                                        <div class="col-md-6">
                                                            <p class="info-label">Type de formation:</p>
                                                            <p class="info-value">{{ formation.type }}</p>
                                                        </div>
                                                        <div class="col-md-6">
                                                            <p class="info-label">Niveau:</p>
                                                            <p class="info-value">{{ formation.niveau }}</p>
                                                        </div>
                                                    </div>
                                                    
                                                    <div class="row mb-4">
                                                        <div class="col-md-6">
                                                            <p class="info-label">Date de début:</p>
                                                            <p class="info-value">{{ formation.date }}</p>
                                                        </div>
                                                        <div class="col-md-6">
                                                            <p class="info-label">Durée:</p>
                                                            <p class="info-value"> {{ formation.duree }}</p>
                                                        </div>
                                                    </div>
                                                    
                                                    <div class="row mb-4">
                                                        <div class="col-md-6">
                                                            <p class="info-label">Prix:</p>
                                                            <p class="info-value">{{ formation.prix }} cfa</p>
                                                        </div>
                                                        <div class="col-md-6">
                                                            <p class="info-label">Nombre de places:</p>
                                                            <p class="info-value">{{ formation.nombre }}</p>
                                                        </div>
                                                    </div>
                                                    
                                                    <div class="mb-4">
                                                        <p class="info-label">Localisation:</p>
                                                        <p class="info-value">{{ formation.localisation }}</p>
                                                    </div>
                                                    
                                                    <div class="mb-4">
                                                        <p class="info-label">Résumé:</p>
                                                        <p class="info-value">{{ formation.resume }}</p>
                                                    </div>
                                                    
                                                    <div class="mb-4">
                                                        <p class="info-label">Description complète:</p>
                                                        <p class="info-value">{{ formation.description }}</p>
                                                    </div>
                                                    
                                                  </div>
                                            </div>
                              
                                          <div class="text-end d-flex " >
                                              <div class="text-end">
                                                  <button class="btn btn-warning mx-2" (click)='onSelectFormation(formation.id)'>Modifier</button>
                                                  <button class="btn btn-danger" (click)="deleteFormation(formation.id)">Supprimer</button>
                                              </div>
                                          </div>
                                        </div>                                    
                                          <!-- Inscrits Tab -->
                                          <div class="tab-pane fade" id="formateurs" role="tabpanel" aria-labelledby="formateurs-tab">
                                              <div class="search-box">
                                                  <i class="fas fa-search"></i>
                                                  <input type="text" class="form-control" placeholder="Rechercher un formateurs...">
                                              </div>
                                              
                                              <div class="container" >
                                                <div class="container "><app-encadrant/></div>
                                            </div> 
                                          </div>

                                                                                    <!-- Inscrits Tab -->
                                          <div class="tab-pane fade" id="inscrits" role="tabpanel" aria-labelledby="inscrits-tab">
                                              <div class="search-box">
                                                  <i class="fas fa-search"></i>
                                                  <input type="text" class="form-control" placeholder="Rechercher un inscrit...">
                                              </div>
                                              
                                              <div class="container" >
                                                <div class="container "><app-etudiant/></div>
                                            </div> 
                                          </div>
                                          
                                          <!-- Séances Tab -->
                                          <div class="tab-pane fade" id="seances" role="tabpanel" aria-labelledby="seances-tab">
                                              <div class="d-flex justify-content-between mb-3">
                                                  <button (click)="onSelectFormationModule(dasbordId)" class="btn btn-primary">
                                                      <i class="fas fa-plus me-2"></i> Ajouter une module
                                                  </button>
                                                  <div class="btn-group">
                                                      <button class="btn btn-outline-secondary">Toutes</button>
                                                      <button class="btn btn-outline-secondary">Confirmées</button>
                                                      <button class="btn btn-outline-secondary">En attente</button>
                                                      <button class="btn btn-outline-secondary">Annulées</button>
                                                  </div>
                                              </div>
                                              
                                              

                                              <body class="bg-light">
                                                <div class="container-fluid ">
                                                    <div class="card shadow">
                                                        <div class="card-body">
                                                            <h1 class="h3 mb-4">Gestion des Modules et Séances</h1>
                                                            
                                                            <div class="table-responsive">
                                                                <table class="table table-hover table-bordered">
                                                                    <thead class="table-dark">
                                                                        <tr>
                                                                            <th style="width: 5%" class="text-center align-middle">Code</th>
                                                                            <th style="width: 20%" class="text-center align-middle">Module</th>
                                                                            <th style="width: 75%">
                                                                                <table class="table table-seances mb-0">
                                                                                    <thead>
                                                                                        <tr>
                                                                                            <th colspan="6" class="text-center">Séances</th>
                                                                                        </tr>
                                                                                        <tr>
                                                                                            <th style="width: 20%">Lieu</th>
                                                                                            <th style="width: 20%">Formateur</th>
                                                                                            <th style="width: 15%">Date</th>
                                                                                            <th style="width: 15%">Heure</th>
                                                                                            <th style="width: 10%">Statut</th>
                                                                                            <th style="width: 20%">Actions</th>
                                                                                        </tr>
                                                                                    </thead>
                                                                                </table>
                                                                            </th>
                                                                        </tr>
                                                                    </thead>
                                                                    <tbody>
                                                                        <!-- Module 1 -->
                                                                        <tr class="module-row" *ngFor="let modules of FiltresModules; let i = index">
                                                                            <td class="text-center align-middle">{{ modules.code }}</td>
                                                                            <td class="text-center align-middle">{{ modules.nom_module }}</td>
                                                                            <td class="p-0">
                                                                                <table class="table table-seances mb-0">
                                                                                    <tbody>
                                                                                        <!-- Séance 1 -->
                                                                                        <tr class="seance-row" *ngFor="let seance of seancesAvecEncadrants">
                                                                                            <td  *ngIf='seance.module==modules.id && seance.formation==dasbordId' style="width: 20%">{{ seance.lieu }}</td>
                                                                                            <td style="width: 20%" *ngIf='seance.module==modules.id && seance.formation==dasbordId'>
                                                                                                <div *ngFor="let encadrant of  seance.encadrants" >
                                                                                                    <div>{{ encadrant.prenom }}</div>
                                                                                                    <div>{{ encadrant.nom }}</div>
                                                                                                </div>
                                                                                            </td>
                                                                                            <td *ngIf='seance.module==modules.id && seance.formation==dasbordId' style="width: 15%">{{ seance.date_formation }}</td>
                                                                                            <td *ngIf='seance.module==modules.id && seance.formation==dasbordId' style="width: 15%">{{ seance.heure_debut }}-{{ seance.heure_fin }}</td>
                                                                                            <td *ngIf='seance.module==modules.id && seance.formation==dasbordId' style="width: 10%">
                                                                                                <span class="badge badge-confirmed">{{ seance.statut }}</span>
                                                                                            </td>
                                                                                            <td *ngIf='seance.module==modules.id && seance.formation==dasbordId' style="width: 20%">
                                                                                                <div class="d-flex gap-2">
                                                                                                    <button [routerLink]="['/admin/modification-seance', seance.id]" class="btn btn-warning btn-sm">
                                                                                                        <i class="fas fa-edit"></i> Modifier
                                                                                                    </button>
                                                                                                    <button (click)="deleteSeance(seance.id)" class="btn btn-danger btn-sm">
                                                                                                        <i class="fas fa-trash"></i> Supprimer
                                                                                                    </button>
                                                                                                </div>
                                                                                            </td>
                                                                                        </tr>
                                                                                        
                                                                                    </tbody>
                                                                                </table>
                                                                                <div class="module-actions p-2 d-flex justify-content-end gap-2">
                                                                                    <button  (click)="deleteModule(modules.id)" class="btn btn-danger btn-sm">
                                                                                        <i class="fas fa-times"></i> Retirer le module
                                                                                    </button>
                                                                                    <button (click)="onSelectModule(dasbordId,modules.id)" class="btn btn-secondary btn-sm">
                                                                                        <i class="fas fa-plus"></i> Ajouter une séance
                                                                                    </button>
                                                                                </div>
                                                                            </td>
                                                                        </tr>
                                                                    </tbody>
                                                                </table>
                                                            </div>
                                                        </div>
                                                    </div>
                                                </div>
                                            </body>
                                
                                          
                                          </div>
                                          
                                          <!-- Annonces Tab -->
                                          <div class="tab-pane fade" id="annonces" role="tabpanel" aria-labelledby="annonces-tab" >
                                            <div class="d-flex justify-content-between align-items-center mb-3 flex-wrap">
  
                                                <button (click)="isCreateFormulaireAnnonce()" 
                                                        class="btn btn-primary me-3 mb-2" 
                                                        *ngIf="showAnnonceButton">
                                                  <i class="fas fa-plus me-2"></i> Créer une annonce
                                                </button>
                                              
                                                <div class="mb-2" *ngIf='showAnnonceList'>
                                                  <label class="me-2">Afficher :</label>
                                                  <select [(ngModel)]="nombreAffichage" class="form-select d-inline-block w-auto">
                                                    <option *ngFor="let option of optionsAffichage" [value]="option">
                                                      {{ option === 0 ? 'Tout' : option }}
                                                    </option>
                                                  </select>
                                                </div>
                                              
                                              </div>
                                              



                                              <div class="container my-4" *ngIf='showAnnonceFormulaire'>                                             
                                                  <div class="container mt-4">
                                                  
                                                    <form [formGroup]="annonceForm" (ngSubmit)="ajouterAnnonce()">
                                                      <!-- Titre de l'annonce -->
                                                      <div class="form-group mb-3">
                                                        <label for="titre">Titre</label>
                                                        <input type="text" id="titre" formControlName="titre" class="form-control">
                                                        <div *ngIf="annonceForm.get('titre')?.invalid && annonceForm.get('titre')?.touched" class="text-danger">
                                                          Le titre est requis.
                                                        </div>
                                                      </div>
                                                  
                                                      <!-- Lieu de l'annonce -->
                                                      <div class="form-group mb-3">
                                                        <label for="lieu">Lieu</label>
                                                        <input type="text" id="lieu" formControlName="lieu" class="form-control">
                                                        <div *ngIf="annonceForm.get('lieu')?.invalid && annonceForm.get('lieu')?.touched" class="text-danger">
                                                          Le lieu est requis.
                                                        </div>
                                                      </div>
                                                  
                                                      <!-- Date du cours -->
                                                      <div class="form-group mb-3">
                                                        <label for="date_cours">Date du Cours</label>
                                                        <input type="date" id="date_cours" formControlName="date_cours" class="form-control">
                                                        <div *ngIf="annonceForm.get('date_cours')?.invalid && annonceForm.get('date_cours')?.touched" class="text-danger">
                                                          La date du cours est requise.
                                                        </div>
                                                      </div>
                                                  
                                                      <!-- Description de l'annonce -->
                                                      <div class="form-group mb-3">
                                                        <label for="description">Description</label>
                                                        <textarea id="description" formControlName="description" class="form-control" rows="3"></textarea>
                                                        <div *ngIf="annonceForm.get('description')?.invalid && annonceForm.get('description')?.touched" class="text-danger">
                                                          La description est requise.
                                                        </div>
                                                      </div>
                                                      <div class="mt-3 mb-3 d-flex">
                                                        <button type="button" class="btn btn-outline-danger mx-2" (click)='annulerAnnonce()'>Annuler vv</button>
                                    
                                                        <button type="submit" style='border:none' [disabled]="annonceForm.invalid">Ajouter Annonce</button>
                                                      </div>
                                                    </form>
                                                  </div>
                                                  
                                               </div>
                                    
                                    


                                            <div *ngIf='showAnnonceList' >
                                              <div class="card mb-3" *ngFor="let annonce of  annoncesAffichees()">
                                                  <div class="card-body">
                                                      <div class="d-flex justify-content-between align-items-start mb-2">
                                                          <h5 class="card-title mb-0">{{ annonce.titre }} </h5>
                                                          <span class="badge bg-info text-dark">Nouveau </span>  
                                                      </div>
                                                      <p class="card-text text-muted small mb-2">Publié le  {{ annonce.date_publication | date: 'dd/MM/yyyy' }} à {{ annonce.heure }}</p>
                                                      <p class="card-text">{{ annonce.description }}</p>
                                                      <div class="d-flex justify-content-between align-items-center">
                                                          <span class="text-muted small">Lieu: {{ annonce.lieu}}</span>
                                                          <span class="text-muted small">Date: {{ annonce.date_cours}}</span>
                                                         
                                                          <div>
                                                              <button (click)="supprimerAnnonce(annonce.id)" class="btn btn-sm btn-outline-danger"><i class="fas fa-trash"></i></button>
                                                          </div>
                                                      </div>
                                                  </div>
                                              </div>
                                            </div>
                                              
                                          </div>
                                      </div>
                                  </div>
                              </div>
                          </div>
                      </div>
                  </div>
              
                  <!-- 
                  <footer class="bg-dark text-white py-4 mt-5">
                      <div class="container">
                          <div class="row">
                              <div class="col-md-6">
                                  <h5>Formation Admin</h5>
                                  <p>Plateforme d'administration des formations FIDALLI</p>
                              </div>
                              <div class="col-md-3">
                                  <h5>Liens utiles</h5>
                                  <ul class="list-unstyled">
                                      <li><a href="#" class="text-white">Aide</a></li>
                                      <li><a href="#" class="text-white">Documentation</a></li>
                                      <li><a href="#" class="text-white">Support</a></li>
                                  </ul>
                              </div>
                              <div class="col-md-3">
                                  <h5>Contact</h5>
                                  <ul class="list-unstyled">
                                      <li><i class="fas fa-envelope me-2"></i> contact@fidalli.com</li>
                                      <li><i class="fas fa-phone me-2"></i> +33 1 23 45 67 89</li>
                                      <li><i class="fas fa-map-marker-alt me-2"></i> 123 Rue de la Formation, Paris</li>
                                  </ul>
                              </div>
                          </div>
                          <hr>
                          <div class="text-center">
                              <p class="mb-0">&copy; 2023 FIDALLI - Tous droits réservés</p>
                          </div>
                      </div>
                  </footer>
              -->

             
              
            




            

           </div>
  
          <!-- Groupes -->
           <div class="container my-4" *ngIf="showGroupe">
              <!-- liste des groupe -->
              <app-groupe-etudiant/>
              
      
           </div>
  
           <!-- Liste de cohorte utilisateurs -->
           <div class="container my-4" *ngIf="showListe">
              <div class="container my-4">

                <!-- Liste des étudiants -->
                <app-etudiant/>
                 
                  
                </div>

                <!-- Ajouter un formateur -->
                <div class="container my-4">

                  <!-- /iste des formateurs -->
                  <app-encadrant/>
                  
                </div>
                
           </div>

           <!-- Bloc d'ajout de module------------ -->
           <div class="addModuleContainer" *ngIf="showAjoutModule">
            <h2>Ajouter des modules</h2>


            <div class="row">
              <div class="col-md-6">
                <h6>Modules disponibles</h6>
                <div class="scrollable">
                  <div *ngFor="let module of modules">
                    <input type="checkbox" (change)="onModuleSelectionChange(module.id, $event)">
                    <label>{{ module.nom_module }}</label>
                  </div>
                </div>
              </div>
            
              <div class="col-md-6">
                <h6>Formateurs enregistrés</h6>
                <div *ngFor="let selected of selectedModules" class="scrollable">
                  <h6>Choisir des formateurs pour le module {{ getModuleName(selected.moduleId) }}</h6>
                  <div *ngFor="let formateur of encadrants">
                    <input type="checkbox" (change)="onFormateurSelectionChange(selected.moduleId, formateur.id, $event)">
                    <label>{{ formateur.nom }}</label>
                  </div>
                </div>
              </div>
            </div>
            

            <div class="mt-3 mb-3 d-flex">
              <button type="submit" class="btn btn-outline-danger mx-2" (click)="onShutAjoutModule()">Annuler</button>
              <button type="submit" class="btn btn-primary" (click)="onShutAjoutModule()">Ajouter</button>
            </div>
          </div>
  
           <!-- calendrier de la formation -->
           <div class="container my-4" *ngIf="showCalendar">


            <h2 class="mb-4">Planning des modules</h2>


            <table class="table table-striped table-bordered">
              <thead class="thead-dark">
                  <tr>
                  <th  style="width: 5%; text-align: center; vertical-align: middle;">Code Module</th>
                  <th style="width: 20%; text-align: center; vertical-align: middle;">Nom de module</th>
                  <th style="width: 75%;">
                      <table class="table table-striped">
                          <tr style="border-bottom: 2px solid black;">
                              <th colspan="6" style="width: 100%; text-align: center;">Séances</th>
                          </tr>
                          <tr>
                              
                              <th style="width: 20%;">Lieu</th>
                              <th style="width: 20%;">Formateur</th>
                              <th style="width: 15%;">Date</th>
                              <th style="width: 15%;">Heure</th>
                              <th style="width: 10%;">Statut</th>
                              <th style="width: 20%;">Actions</th>

                          </tr>
                      </table>
                  </th>
                  </tr>
              </thead>



              <tbody>
                  <tr *ngFor="let modules of FiltresModules; let i = index">
                      <td  style="width: 5%; text-align: center; vertical-align: middle;">{{ modules.code }} </td>
                      <td  style="width: 20%; text-align: center; vertical-align: middle;">{{ modules.nom_module }} {{formationId}}</td>
                      <td style="width: 75%;">
                          <table class="table table-striped" >
                                  <tr *ngFor="let seance of seancesAvecEncadrants" style="border-bottom: 1px solid black;" >
                                      <td  *ngIf='seance.module==modules.id && seance.formation==dasbordId' style="width: 20%;">{{ seance.lieu }}</td>
                                      <td  *ngIf='seance.module==modules.id && seance.formation==dasbordId' style="width: 20%;">
                                        <div *ngFor="let encadrant of  seance.encadrants" >  
                                          <span >{{ encadrant.nom }} {{ encadrant.prenom }}</span>  
                                        </div>
                                      </td>
                                      <td *ngIf='seance.module==modules.id && seance.formation==dasbordId' style="width: 15%;">{{ seance.date_formation }}</td>
                                      <td *ngIf='seance.module==modules.id && seance.formation==dasbordId' style="width: 15%;">{{ seance.heure_debut }}-{{ seance.heure_fin }}</td> 
                                      <td  *ngIf='seance.module==modules.id && seance.formation==dasbordId' style="width: 10%;"><div style="height: 70%; background-color: aqua; border-radius: 10px; margin: 5px; padding: 5px;">{{ seance.statut }}</div>
                                      </td>



                     
                                      <td style="width: 20%;" *ngIf='seance.module==modules.id && seance.formation==dasbordId'>
                                        <div class="d-flex">

                                            <button  class="btn btn-warning btn-sm mx-2" [routerLink]="['/admin/modification-seance', seance.id]">Modifier</button>

                                            <button  class="btn btn-danger btn-sm" (click)="deleteSeance(seance.id)">Supprimer</button>
                                        </div>
                                    </td>
                                  </tr>
                          </table>
                          <div class="d-flex">
                            <!-- <a class="btn btn-warning btn-sm" [routerLink]="['/gestionnaire/modification-module', module.id]">Modifier le module</a> -->
                            <button class="btn btn-danger btn-sm mx-2" (click)="deleteModule(modules.id)">Retirer le module</button>
                            
                              
                            
                              <div *ngIf='dasbordId'>
                                  <button class="btn btn-secondary btn-sm" (click)="onSelectModule(dasbordId,modules.id)">Ajouter une séance </button>
                      
                              </div>
                      
                         
                    
                            
                        </div>
                          
                      </td>
                      </tr>
          
              </tbody>
          </table>
              
           </div>
  
           <!-- TD & Examens -->
           <div class="container my-4" *ngIf="showExo">
              <h1>Pas d'exo</h1>
           </div>
  
           <!-- Webinaire -->
           <div class="container my-4" *ngIf="showWebinar">
              <h1>Pas de webinaire en cours</h1>
           </div>
        </main>
      </div>
  
      

        
  </body>





